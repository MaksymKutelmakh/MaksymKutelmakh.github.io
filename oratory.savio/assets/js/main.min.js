const popup = document.getElementById("language_popup");
function scrollDownClick() {
  window.screen.width < 750 &&
    window.scrollTo({
      top: document.body.parentElement.scrollTop + 800,
      behavior: "smooth",
    });
}
function setDefaultTab(e) {
  document.querySelectorAll(".item").forEach((e) => {
    e.classList.remove("show"), e.classList.remove("active");
  });
  const t = document.getElementById(e);
  t.classList.add("show"), t.classList.add("active");
}
function updateContent(e) {
  document.querySelectorAll("[data-i18n]").forEach((t) => {
    const o = t.getAttribute("data-i18n");
    t.innerHTML = e[o];
  });
}
function setLanguagePreference(e) {
  localStorage.setItem("language", e), location.reload();
}
async function fetchLanguageData(e) {
  return (await fetch(`assets/languages/${e}.json`)).json();
}
async function changeLanguage(e) {
  await setLanguagePreference(e);
  updateContent(await fetchLanguageData(e)),
    (document.getElementById("myModal").style.display = "none");
}
function openFAB() {
  document.getElementById("myModal").style.display = "flex";
}
function toggleScrolled() {
  const e = document.querySelector("body"),
    t = document.querySelector("#header"),
    o = document.getElementById("logo"),
    n = document.getElementById("logo_cut");
  (t.classList.contains("scroll-up-sticky") ||
    t.classList.contains("sticky-top") ||
    t.classList.contains("fixed-top")) &&
    (window.scrollY > 100
      ? e.classList.add("scrolled")
      : e.classList.remove("scrolled"),
    window.scrollY > 100
      ? (o.style.display = "none")
      : (o.style.display = "block"),
    window.scrollY > 100
      ? (n.style.display = "block")
      : (n.style.display = "none"));
}
window.addEventListener("DOMContentLoaded", async () => {
  const e = localStorage.getItem("language") || "en",
    t = { en: "uk-flag-button_header", ua: "ua-button", it: "it-button" },
    o = {
      en: { name: "Name", subject: "Subject", message: "Message" },
      ua: { name: "Ім'я", subject: "Тема", message: "Повідомлення" },
      it: { name: "Nome", subject: "Soggetto", message: "Messaggio" },
    };
  updateContent(await fetchLanguageData(e)),
    !localStorage.getItem("language") && openFAB();
  let n = document.getElementById("selected_lang"),
    l = document.getElementById("selected_lang_mobile"),
    a = document.getElementById("name"),
    i = document.getElementById("subject"),
    s = document.getElementById("message");
  (document.getElementById("summary_of_the_year").src =
    `assets/img/summary_of_the_year_of_the_oratorio_of_Saint_Dominic_Savio_${e}.webp`),
    (a.placeholder = o[e].name),
    (i.placeholder = o[e].subject),
    (s.placeholder = o[e].message),
    n.classList.add(t[e]),
    l.classList.add(t[e]);
}),
  document.addEventListener("scroll", toggleScrolled),
  window.addEventListener("load", toggleScrolled);
const mobileNavToggleBtn = document.querySelector(".mobile-nav-toggle");
function mobileNavToogle() {
  document.querySelector("body").classList.toggle("mobile-nav-active"),
    mobileNavToggleBtn.classList.toggle("bi-list"),
    mobileNavToggleBtn.classList.toggle("bi-x");
}
mobileNavToggleBtn.addEventListener("click", mobileNavToogle),
  document.querySelectorAll("#navmenu a").forEach((e) => {
    e.addEventListener("click", () => {
      document.querySelector(".mobile-nav-active") && mobileNavToogle();
    });
  }),
  document.querySelectorAll(".navmenu .toggle-dropdown").forEach((e) => {
    e.addEventListener("click", function (e) {
      e.preventDefault(),
        this.parentNode.classList.toggle("active"),
        this.parentNode.nextElementSibling.classList.toggle("dropdown-active"),
        e.stopImmediatePropagation();
    });
  });
const preloader = document.querySelector("#preloader");
preloader &&
  window.addEventListener("load", () => {
    preloader.remove();
  });
let scrollTop = document.querySelector(".scroll-top");
function toggleScrollTop() {
  scrollTop &&
    (window.scrollY > 100
      ? scrollTop.classList.add("active")
      : scrollTop.classList.remove("active"));
}
function aosInit() {
  AOS.init({ duration: 600, easing: "ease-in-out", once: !0, mirror: !1 });
}
scrollTop.addEventListener("click", (e) => {
  e.preventDefault(), window.scrollTo({ top: 0, behavior: "smooth" });
}),
  window.addEventListener("load", toggleScrollTop),
  document.addEventListener("scroll", toggleScrollTop),
  window.addEventListener("load", aosInit);
const glightbox = GLightbox({ selector: ".glightbox" });
function initSwiper() {
  (document.getElementById("year").innerHTML =
    "© " + new Date().getFullYear()),
    document.querySelectorAll(".init-swiper").forEach(function (e) {
      let t = {
        loop: !0,
        speed: 600,
        autoplay: { delay: 2e3 },
        breakpoints: {
          320: { slidesPerView: 1, spaceBetween: 0 },
          991: { slidesPerView: 2 },
          1390: { slidesPerView: 3 },
        },
        height: 360,
        slidesPerView: 3,
        spaceBetween: 30,
        pagination: {
          el: ".swiper-pagination-0",
          type: "bullets",
          clickable: !0,
        },
      };
      e.classList.contains("swiper-tab")
        ? initSwiperWithCustomPagination(e, t)
        : new Swiper(e, t);
    });
  for (let e = 1; e < 12; e++)
    document.querySelectorAll(".init-work-swiper-" + e).forEach(function (t) {
      new Swiper(t, {
        loop: !0,
        speed: 600,
        autoplay: { delay: 2e3 },
        slidesPerView: 1,
        spaceBetween: 30,
        pagination: {
          el: ".swiper-pagination-" + e,
          type: "bullets",
          clickable: !0,
        },
      });
    });
}
new PureCounter(),
  document.querySelectorAll(".isotope-layout").forEach(function (e) {
    let t,
      o = e.getAttribute("data-layout") ?? "masonry",
      n = e.getAttribute("data-default-filter") ?? "*",
      l = e.getAttribute("data-sort") ?? "original-order";
    imagesLoaded(e.querySelector(".isotope-container"), function () {
      t = new Isotope(e.querySelector(".isotope-container"), {
        itemSelector: ".isotope-item",
        layoutMode: o,
        filter: n,
        sortBy: l,
      });
    }),
      e.querySelectorAll(".isotope-filters li").forEach(function (o) {
        o.addEventListener(
          "click",
          function () {
            e
              .querySelector(".isotope-filters .filter-active")
              .classList.remove("filter-active"),
              this.classList.add("filter-active"),
              t.arrange({ filter: this.getAttribute("data-filter") }),
              "function" == typeof aosInit && aosInit();
          },
          !1,
        );
      });
  }),
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll("a[data-target]").forEach((e) => {
      e.addEventListener("click", function () {
        const t = e.getAttribute("data-target");
        document.querySelectorAll(".item").forEach((e) => {
          e.classList.remove("show"), e.classList.remove("active");
        });
        const o = document.getElementById(t);
        o && (o.classList.add("show"), o.classList.add("active"));
      });
    }),
      window.screen.width > 1200
        ? ((document.getElementById("navmenu_mobile").style.display = "none"),
          (document.getElementById("switcher_desktop").style.display = "block"))
        : ((document.getElementById("navmenu_mobile").style.display = "block"),
          (document.getElementById("switcher_desktop").style.display = "none"));
  }),
  window.addEventListener("load", initSwiper),
  window.addEventListener("load", function (e) {
    window.location.hash &&
      document.querySelector(window.location.hash) &&
      setTimeout(() => {
        let e = document.querySelector(window.location.hash),
          t = getComputedStyle(e).scrollMarginTop;
        window.scrollTo({ top: e.offsetTop - parseInt(t), behavior: "smooth" });
      }, 100);
  });
let navmenulinks = document.querySelectorAll(".navmenu a");
function navmenuScrollspy() {
  navmenulinks.forEach((e) => {
    if (!e.hash) return;
    let t = document.querySelector(e.hash);
    if (!t) return;
    let o = window.scrollY + 200;
    o >= t.offsetTop && o <= t.offsetTop + t.offsetHeight
      ? (document
          .querySelectorAll(".navmenu a.active")
          .forEach((e) => e.classList.remove("active")),
        e.classList.add("active"))
      : e.classList.remove("active");
  });
}
window.addEventListener("load", navmenuScrollspy),
  document.addEventListener("scroll", navmenuScrollspy);
